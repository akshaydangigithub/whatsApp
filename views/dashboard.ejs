<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>WhatsApp</title>

	<link rel="stylesheet" href="/stylesheets/style.css">
	<link rel="stylesheet" href="/stylesheets/core.css">
	<link href="https://cdn.jsdelivr.net/npm/remixicon@3.4.0/fonts/remixicon.css" rel="stylesheet">

</head>

<body>
	<main>

		<!-- Sidebar -->
		<aside id="sidebar">
			<div class="update-profile-sidebar">
				<i class="ri-arrow-left-line close-menu"></i>
				<h1>Update your profile photo</h1>
				<h2>
					<%= loggedInuser.name %>
						<%= loggedInuser.LastName %>
				</h2>
				<div class="photo">
					<img src="./images/uploads/<%= loggedInuser.Profile_photo %>" alt="">
					<form style="display: none;" id="uploadProfilePhoto" action="/uploadProfilePhoto" method="post"
						enctype="multipart/form-data">
						<input id="Profile-photo-input" type="file" name="image" />
						<button type="submit">Upload Cover Photo</button>
					</form>
				</div>
				<div class="change-icon">
					<i class="ri-camera-switch-fill"></i>
				</div>
			</div>
			<header id="sidebar-header">
				<div id="profile-image">
					<img src="./images/uploads/<%= loggedInuser.Profile_photo %>" alt="" class="avatar">
				</div>
				<div class="toolbar">
					<a href="/status">Status</a>
					<a href="/call">Call</a>

					<div class="dropdown">
						<img src="/images/icons/menu.svg" alt="" class="icon dropdown-button">
						<div class="dropdown-content">
							<a data-bs-toggle="modal" data-bs-target="#createGroupModel" href="#">New group</a>
							<a href="#">New community</a>
							<a href="#">Archived</a>
							<a href="#">Starred messages</a>
							<a href="#">Select chats</a>
							<a href="#">Settings</a>
							<a href="#">Log out</a>
						</div>
					</div>
				</div>
			</header>
			<form id="search-toolbar">
				<input type="search" name="" id="search-input" placeholder="Search or start a new chat">
				<img src="/images/icons/filter.svg" alt="" class="icon">
			</form>
			<section id="sidebar-contents">
				<div id="chats-list">
							<% allUserWithoutLoggedInUser.forEach(function(user){ %>
								<div class="chat-tile" data-id="<%= user._id %>">
									<div class="chat-tile-avatar">
										<img src="./images/uploads/<%= user.Profile_photo %>" alt="">

										<% if(user.is_online==1){ %>

											<div class="online-user"></div>
											<% } %>
									</div>
									<div class="chat-tile-details">
										<div class="chat-tile-title">
											<span>
												<%= user.name %>
													<%= user.LastName %>
											</span>
											<span>Good Day ðŸ˜Š</span>
										</div>
										<div class="chat-tile-subtitle">
											<span>You: hey there! how are you?</span>
											<span class="chat-tile-menu">
												<img src="/images/icons/pin.svg" alt="" class="pin">
											</span>
										</div>
									</div>
								</div>
								<% }) %>


				</div>
			</section>
		</aside>
		<!-- Sidebar ends -->

		<!-- Chat window -->
		<section id="chat-window">
			<div class="before-chat">
				<i class="ri-whatsapp-line"></i>
				<h1>WhatsApp for Windows</h1>
				<p>Send and receive messages without keeping your phone online. <br> Use WhatsApp on up to 4 linked
					devices and one phone at the same time.</p>
			</div>
			<header id="chat-window-header">
				<!-- ------- header details here ----------- -->
			</header>

			<div id="chat-window-contents">
				<div class="datestamp-container">
					<span class="datestamp">
						03/05/2023
					</span>
				</div>

				<div class="allChatsContaines">
					<!-- ------ all chats here --------- -->
				</div>
			</div>


			<footer id="chat-window-footer">
				<img src="/images/icons/emoji.svg" alt="" class="icon">
				<img src="/images/icons/attachment.svg" alt="" class="icon">
				<form action="" id="chat-form">
					<input type="search" name="message" id="compose-chat-box" placeholder="Type a message"
						autocomplete="off">
					<input style="display: none;" type="submit" class="btn btn-primary" value="send message">
				</form>
				<img src="/images/icons/mic.svg" alt="" class="icon">
			</footer>
		</section>
		<!-- Chat window ends -->

	</main>



	<!-- Import Scripts -->
	<script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.3.2/axios.min.js"
		integrity="sha512-NCiXRSV460cHD9ClGDrTbTaw0muWUBf/zB/yLzJavRsPNUl9ODkUVmUHsZtKu17XknhsGlmyVoJxLg/ZQQEeGA=="
		crossorigin="anonymous" referrerpolicy="no-referrer"></script>

	<script src="/javascripts/script.js"></script>
	<script src="/javascripts/socket.js"></script>
</body>

</html>